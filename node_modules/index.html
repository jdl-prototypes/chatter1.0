<!doctype html>
<html ng-app='chatApp'>
  <head>
    <title>Chatter :)</title>
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font: 13px Helvetica, Arial; }
      form { background: #000; padding: 3px; position: fixed; bottom: 0; width: 100%; }
      form input { border: 0; padding: 10px; width: 90%; margin-right: .5%; }
      form button { width: 9%; background: rgb(130, 224, 255); border: none; padding: 10px; }
      #messages { list-style-type: none; margin: 0; padding: 0; }
      #messages li { padding: 5px 10px; }
      #messages li:nth-child(odd) { background: #eee; }
    </style>
    
    <script src="/socket.io/socket.io.js"></script>
    <script src='/angular.js'></script>
    <script src='/scrollglue.js'></script>
    <script src='/jquery.js'></script>
    <script src='/site.js'></script>
    <script src='/chat.js'></script>
    <script src='/chatAppController.js'></script>
    <link href='/site.css' rel='stylesheet' type='text/css'/>
    <link href='/bootstrap.css' rel='stylesheet' type='text/css'/>

  </head>
  <body ng-controller='LoginController'>

    <header class='childFloatL childPad7half'>
      <button ng-click="toggleUserList()" ng-style='styleUserListButton'>

        <svg width="30" height="30" viewBox="0 0 48 48">
        <path ng-style='styleUserListIcon' d="M24 3c13.255 0 24 8.73 24 19.5s-10.745 19.5-24 19.5c-1.273 0-2.522-0.081-3.742-0.236-5.155 5.155-11.309 6.080-17.258 6.215v-1.262c3.213-1.574 6-4.441 6-7.717 0-0.457-0.036-0.906-0.101-1.345-5.428-3.575-8.899-9.035-8.899-15.155 0-10.77 10.745-19.5 24-19.5z" fill="#999999"></path>
        </svg>
      </button>
      <button ng-click='toggleNotification()' ng-style='styleNotification'>
        <svg width="30" height="30" viewBox="0 0 48 48">
        <path ng-style='styleNotificationIcon' d="M48.070 37.5c0-13.5-12-10.5-12-21 0-0.87-0.084-1.613-0.237-2.247-0.789-5.298-4.32-9.549-8.896-10.845 0.041-0.185 0.062-0.377 0.062-0.572 0-1.56-1.35-2.836-3-2.836s-3 1.276-3 2.836c0 0.196 0.021 0.387 0.062 0.572-5.131 1.453-8.949 6.623-9.059 12.818-0.002 0.090-0.003 0.181-0.003 0.274 0 10.5-12 7.5-12 21 0 3.573 7.996 6.562 18.702 7.316 1.009 1.894 3.003 3.184 5.298 3.184s4.289-1.29 5.298-3.184c10.705-0.754 18.702-3.743 18.702-7.316 0-0.011-0.001-0.021-0.001-0.032l0.072 0.032zM38.73 40.036c-2.542 0.678-5.539 1.166-8.755 1.437-0.267-3.066-2.84-5.472-5.976-5.472s-5.708 2.406-5.976 5.472c-3.216-0.271-6.213-0.758-8.755-1.437-3.498-0.933-5.171-1.978-5.783-2.536 0.612-0.558 2.285-1.602 5.783-2.536 4.067-1.085 9.299-1.683 14.73-1.683s10.663 0.598 14.73 1.683c3.498 0.933 5.171 1.978 5.783 2.536-0.612 0.558-2.285 1.602-5.783 2.536z" fill="#999999"></path>
        </svg>
        <span ng-if="notificationCounter!='' || notificationCounter!=0">{{notificationCounter}}</span>
        
      </button>
      <button class='childFloatL floatR' id='userInfo'>
        <div ng-if="userID !=''" class='userIcon' ng-style="usersList[userID].dpColor">{{usersList[userID].initials}}</div>
        <div class='pad10 hideElements'>{{usersList[userID].firstName}} {{usersList[userID].lastName}}</div>
      </button>
    </header>
    <nav ng-show='showUserList'>
      <div id=''>
        
      </div>
      <ul id=''>
        <li class="bgFFF"><label class="color999">Search:</label><input ng-model='searchUser' type='text' class="form-control" /></li>
        <li ng-repeat="user in usersList | filter:searchUser" ng-if="(user.firstName!=null || user.lastName!=null) && (user.Status==1) && (user.ID!=userID)" ng-click="createChatSession(user.ID)">
          <span class='userIcon' ng-style="user.dpColor">{{user.initials}}</span><span class='pad10'>{{user.firstName}} {{user.lastName}}</span>
          <span class='online'></span>
        </li>
      </ul>
    </nav>

    <div id='wrapperNotification' ng-show='showNotificationModal'>
      <span class='arrowUp'></span>
      <div class='vScroll noListStyle pad5 heightFull'>
        <li ng-repeat="notification in notificationList | orderBy:'-NotificaitonID'" class='childFloatL widthFull lineBottom pad5'>
          <div class='userIcon' ng-style='usersList[notification.UserID].dpColor'>{{usersList[notification.UserID].initials}}</div><div class="pad5">{{notification.Message}}</div>
        </li>
      </div>
    </div>
    <div class='jlModal' ng-show='showModal'>
      <div>
        <div class='defaultModalWidth'>
          
          <div class='pad10' ng-if='isRegisteredAlready()==false'>
            <div>
              <div class='floatL pad10' id='loginLeftPanel'>
                <label for="exampleInputEmail1">First Name</label>
                <input type='text' class='form-control' ng-model='$parent.firstName' ng-change='change()'/>
                <br/>
                <label for="exampleInputEmail1">Last Name</label>
                <input type='text' class='form-control' ng-model='$parent.lastName' ng-change='change()'/>

                <br/>
                <input type='button' class='btn btn-primary' value='Register' ng-click='register()'/>
              </div>
              <div class='floatL pad10' id='loginRightPanel'>
                <div id='thumbNail' ng-style='boxColor'>{{initials}}</div>
                <div class='childFloatL colorBoxes'>
                  <div ng-repeat="color in colors" id='c{{color}}' ng-click="$parent.setColor(color)"></div>
                 
                </div>
              </div>
            </div>
          </div>

          <div class='pad10' ng-if='isRegisteredAlready()==true'>
            <label class='font30 borderBottomCCC widthFull'>Login As:</label><a href="javascript:void(0)" ng-click='deleteAccount()'>Login different account</a>
            <div class='loginSelection' ng-click='login()'>
              <div id='thumbNail' class='floatL' ng-style='boxColor'>{{initials}}</div>
              <div class='floatL pad15 userName'>{{firstName}} {{lastName}}</div>
            </div>
          </div>
        </div>


      </div>
    </div>


    <ul id="messages">
      
    </ul>
    <form action="" ng-show='false'>
      <input id="m" autocomplete="off" /><input type="button" id='sendMessage'>Send</button>
    </form>
      

    <footer>

      <div ng-repeat="session in chatSessionList">
        <div ng-click="minimizeChat(session.ID)">
            <div><div class='onlineIndicator marginTop3' ng-if="session.Status==1"></div><div class='offlineIndicator marginTop3' ng-if="session.Status==0"></div></div><div class="marginTop-3 noselect">{{session.firstName}} {{session.lastName}}</div>
            <button ng-click="deleteChatSession(session.ID)">X</button>
            <button>_</button>
        </div>
        <div class='pad5' ng-show="session.ChatSessionStatus" scroll-glue>
          <div class="childDisplayInlineBlock widthFull pad5 lineBottom" ng-repeat="data in session.ChatMessages[session.ID]" >
            <div class='chatUserIcon' ng-style="usersList[data.UserID].dpColor">{{usersList[data.UserID].initials}}</div>
            <div class='pad5'>{{data.Message}}</div>
          </div>
        </div>
        <div ng-show="session.ChatSessionStatus">
          <input class='floatL' focus-on="focusMe{{session.ID}}" type='text' ng-model='session.Txt' ng-keyup="$event.keyCode == 13 ?sendPrivateMessage(session.ID,userID,session.Txt): null;"/>

          <button class='floatL pad6half noOutline' id='btn-Smiley' ng-click="toggleSessionButton(session.ID, 'BtnSmileyState');alert('Jeremi');" ng-class="{btnActive:session.Controls.Buttons.BtnSmileyState}">
            <div class='wrapperSticker arrowDownRight'  ng-show='false'>
              
            </div>
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16">
            <path fill="#999" d="M8 16c4.418 0 8-3.582 8-8s-3.582-8-8-8-8 3.582-8 8 3.582 8 8 8zM8 1.5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5-6.5-2.91-6.5-6.5 2.91-6.5 6.5-6.5zM8 9.356c1.812 0 3.535-0.481 5-1.327-0.228 2.788-2.393 4.971-5 4.971s-4.772-2.186-5-4.973c1.465 0.845 3.188 1.329 5 1.329zM4 5.5c0-0.828 0.448-1.5 1-1.5s1 0.672 1 1.5c0 0.828-0.448 1.5-1 1.5s-1-0.672-1-1.5zM10 5.5c0-0.828 0.448-1.5 1-1.5s1 0.672 1 1.5c0 0.828-0.448 1.5-1 1.5s-1-0.672-1-1.5z"></path>
            </svg>
          </button>


          <button class='floatL pad6half noOutline' id='btn-InsertImage' ng-click="toggleSessionButton(session.ID, 'BtnInsertImageState')" ng-style='session.Controls.Buttons.BtnInsertImageStyle' ng-class="{btnActive:session.Controls.Buttons.BtnInsertImageState}">
            
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16">
            <path fill="#999" d="M14 3h-12v10h12v-10zM16 1v0 14h-16v-14h16zM13 12h-10v-2l3-5 4.109 5 2.891-2v1zM10 5.5c0-0.828 0.672-1.5 1.5-1.5s1.5 0.672 1.5 1.5c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5z"></path>
            </svg>
          </button>

          <input type='file' ng-model='session.FileImg'/>
        </div>

      </div> 

     <div ng-show="false">
        <audio controls id='notificationSound'>
          <source src="notificationSound" type="audio/mpeg">
        Your browser does not support the audio element.
        </audio>
      </div>

      <button class='floatR childFloatL' id='notificationSoundOnOff' ng-click='sound=!sound'> 
        
        <div ng-if='sound==true'>
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="17" height="16" viewBox="0 0 17 16">
          <path fill="#333333" d="M13.907 14.407c-0.192 0-0.384-0.073-0.53-0.22-0.293-0.293-0.293-0.768 0-1.061 1.369-1.369 2.123-3.19 2.123-5.127s-0.754-3.757-2.123-5.127c-0.293-0.293-0.293-0.768 0-1.061s0.768-0.293 1.061 0c1.653 1.653 2.563 3.85 2.563 6.187s-0.91 4.534-2.563 6.187c-0.146 0.146-0.338 0.22-0.53 0.22zM11.243 12.993c-0.192 0-0.384-0.073-0.53-0.22-0.293-0.293-0.293-0.768 0-1.061 2.047-2.047 2.047-5.378 0-7.425-0.293-0.293-0.293-0.768 0-1.061s0.768-0.293 1.061 0c1.275 1.275 1.977 2.97 1.977 4.773s-0.702 3.498-1.977 4.773c-0.146 0.146-0.338 0.22-0.53 0.22zM8.578 11.578c-0.192 0-0.384-0.073-0.53-0.22-0.293-0.293-0.293-0.768 0-1.061 1.267-1.267 1.267-3.329 0-4.596-0.293-0.293-0.293-0.768 0-1.061s0.768-0.293 1.061 0c1.852 1.852 1.852 4.866 0 6.718-0.146 0.146-0.338 0.22-0.53 0.22zM6.271 1.229c0.401-0.401 0.729-0.265 0.729 0.302v12.938c0 0.567-0.328 0.703-0.729 0.302l-3.771-3.771h-2.5v-6h2.5l3.771-3.771z"></path>
          </svg>
        </div>

        <div ng-if='sound==false'>
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16">
          <path fill="#333333" d="M6.271 1.229c0.401-0.401 0.729-0.265 0.729 0.302v12.938c0 0.567-0.328 0.703-0.729 0.302l-3.771-3.771h-2.5v-6h2.5l3.771-3.771zM15 9.674v1.326h-1.326l-1.674-1.674-1.674 1.674h-1.326v-1.326l1.674-1.674-1.674-1.674v-1.326h1.326l1.674 1.674 1.674-1.674h1.326v1.326l-1.674 1.674z"></path>
          </svg>
        </div>

       

      </button>
    </footer>


  </body>
</html>